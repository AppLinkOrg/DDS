<!--pages/release/release.wxml-->

<view class='mid margin-top  '>
  <form bindsubmit="confirm" bindreset="formReset" report-submit="{{true}}">

    <view class='flex-row flex-center bor_btm padding-40'>
      <view class='txt-black txt-bold h3 flex-1'>开始创建新的任务</view>
      
      <image class='icon-100' src='{{uploadpath}}resource/{{res.car_pic}}'></image>
    </view>

    <view class='bor_btm padding-40'>

      <view class='flex-row flex-center '>
        <image class='icon-20' src='{{uploadpath}}resource/{{res.time_icon}}'></image>
        <view class='txt-gray h5 margin-left-20'>报名时间</view>
      </view>

      <view class='flex-row flex-center margin-top' style='border-bottom:'>
        <view class='flex-row flex-column flex-1' style=''>
          <view class='txt-black'>报名开始:</view>
          <picker mode='date' bindchange="bindstartdate" start='{{today}}'>
            <input placeholder-style="font-size:35rpx;" bindinput='startcontactdate' name='scdate' class='h3 txt-black margin-top-10  text-center' disabled='true' placeholder='请选择开始日期' value='{{startdate}}'></input>
          </picker>
          <view class='flex-row flex-center margin-top-20'>
            <!-- <view class='h5'>周三</view> -->
            <picker mode='time' bindchange="bindstarttime" disabled='{{startdate==""}}'>
              <input placeholder-style="font-size:28rpx;" bindinput='startcontacttime' name='startcontacttime' class='h5 txt-black   text-center' disabled='true' placeholder='请选择开始时间' value='{{starttime}}'></input>
            </picker>
          </view>
        </view>

        <view class='flex-row flex-column flex-1' style=''>
          <view class='txt-black'>报名截止:</view>
          <picker mode='date' bindchange="bindenddate" start='{{startdatenextday}}' bindtap='start' disabled='{{startdate==""||starttime==""}}'>
            <input placeholder-style="font-size:35rpx;" bindinput='endcontactdate' name='ecdate' class='h3 txt-black margin-top-10  text-center' disabled='true' placeholder='请选择截止日期' value='{{enddate}}'></input>
          </picker>

          <view class='flex-row flex-center margin-top-20'>
            <!-- <view class='h5'>周四</view> -->
            <picker mode='time' bindchange="bindendtime" disabled='{{startdate==""}}' disabled='{{startdate==""||starttime==""}}' bindtap='start'>
              <input placeholder-style="font-size:28rpx;" bindinput='endcontacttime' name='endcontacttime' class='h5 txt-black   text-center' disabled='true' placeholder='请选择截止时间' value='{{endtime}}'></input>
            </picker>
          </view>
        </view>
      </view>

    </view>

    <view class='padding-40 bor_btm'>

      <view class='flex-row column margin-left-20 '>
        <view class='flex-row flex-center '>
          <image class='icon-10' src='{{uploadpath}}resource/{{res.green}}'></image>
          <view class=' h5 txt-gray margin-left-20' style='width:600rpx;'>装车地址</view>
        </view>
        <view class='h4 txt-black padding-top-10 padding-left-30 text-center'>
          <input placeholder='请输入详细地址' bindinput='startaddress' name='startaddress'></input>
        </view>
      </view>
      <!-- bindtap='openRoute' -->
      <view class='flex-row column margin-left-20 margin-top-20'>
        <view class='flex-row flex-center '>
          <image class='icon-10' src='{{uploadpath}}resource/{{res.orange}}'></image>
          <view class=' h5 txt-gray margin-left-20' style='width:600rpx;'>目的地址</view>
        </view>
        <view class='h4 txt-black padding-top-10 padding-left-30 text-center'>
          <input placeholder='请输入详细地址' bindinput='endaddress' name='endaddress'></input>

        </view>
      </view>
    </view>

    <view class='bor_btm padding-40'>

      <view class='flex-row flex-center '>
        <image class='icon-20' src='{{uploadpath}}resource/{{res.time_icon}}'></image>
        <view class='txt-gray h5 margin-left-20'>运输时间</view>
      </view>
      <view class='flex-row flex-center margin-top' style='border-bottom:'>
        <view class='flex-row flex-column flex-1' style=''>
          <view class='txt-black'>运输开始:</view>
          <picker mode='date' bindchange="tst_startdate" start='{{enddatenextday}}' disabled='{{enddate==""||endtime==""}}' bindtap='end'>
            <input placeholder-style="font-size:28rpx;" bindinput='starttransportdate' name='stpdate' class='h3 txt-black margin-top-10  text-center' disabled='true' placeholder='请选择开始日期' value='{{tstdate}}'></input>
          </picker>
          <view class='flex-row flex-center margin-top-20'>
            <!-- <view class='h5'>周三</view> -->
            <picker mode='time' bindchange="tst_starttime" disabled='{{enddate==""||endtime==""}}' bindtap='end'>
              <input placeholder-style="font-size:25rpx;" bindinput='starttransporttime' name='starttransporttime' class='h5 txt-black   text-center' disabled='true' placeholder='请选择开始时间' value='{{tsttime}}'></input>
            </picker>
          </view>
        </view>

        <!-- <view class='flex-row flex-column flex-1'>
          <view class='flex-row flex-center'>
            <view class='h5'>1天</view>
            <view class='h5'>0小时</view>
          </view>
          <image class='goto_icon' src='{{uploadpath}}resource/{{res.goto_icon}}'></image>
        </view> -->

        <view class='flex-row flex-column flex-1' style=''>
          <view class='txt-black'>运输截止:</view>
          <picker mode='date' bindchange="tst_enddate" start='{{tststartdatenextday}}' disabled='{{tstdate==""||tsttime==""}}' bindtap='ttstart'>
            <input placeholder-style="font-size:28rpx;" bindinput='endtransportdate' name='etpdate' class='h3 txt-black margin-top-10  text-center' disabled='true' placeholder='请选择截止日期' value='{{tstenddate}}'></input>
          </picker>
          <view class='flex-row flex-center margin-top-20'>
            <!-- <view class='h5'>周四</view> -->
            <picker mode='time' bindchange="tst_endtime" disabled='{{tstdate==""||tsttime==""}}' bindtap='ttstart'>
              <input placeholder-style="font-size:25rpx;" bindinput='endtransporttime' name='endtransporttime' class='h5 txt-black   text-center' disabled='true' placeholder='请选择截止时间' value='{{tstendtime}}'></input>
            </picker>
          </view>
        </view>
      </view>
      <!-- <view class='flex-row flex-center margin-top' style='border-bottom:'>
        <view class='flex-row flex-column flex-1' style=''>
          <view class='h3 txt-black'>07-25</view>
          <view class='flex-row flex-center margin-top-20'>
            <view class='h5'>周三</view>
            <view class='margin-left-10 h5'>14:53</view>
          </view>
        </view>
        <view class='flex-row flex-column flex-1'>
          <view class='flex-row flex-center'>
            <view class='h5'>1天</view>
            <view class='h5'>0小时</view>
          </view>
          <image class='goto_icon' src='{{uploadpath}}resource/{{res.goto_icon}}'></image>
        </view>
        <view class='flex-row flex-column flex-1' style=''>
          <view class='h3 txt-black'>07-26</view>
          <view class='flex-row flex-center margin-top-20'>
            <view class='h5'>周四</view>
            <view class='margin-left-10 h5'>14:53</view>
          </view>
        </view>
      </view> -->

    </view>

    <view class='flex-row column '>

      <view class='flex-row flex-center flex-1 padding-40   bor_btm'>
        <image class='icon-20' src='{{uploadpath}}resource/{{res.driver}}'></image>
        <view class='txt-black h5   margin-left-20'>货物重量</view>
        <input placeholder='请输入货物吨数' bindinput='goodsweight' name='gdsweight' class='h5 text-right flex-1' type='number'></input>
      </view>

      <view class='flex-row flex-center flex-1 padding-40   bor_btm'>
        <image class='icon-20' src='{{uploadpath}}resource/{{res.driver}}'></image>
        <view class='txt-black h5   margin-left-20'>车辆数目</view>
        <input placeholder='请输入车辆数目' bindinput='carnumber' name='carnumber' class='h5 text-right flex-1' type='number'></input>
      </view>

      <picker range='{{goodslist}}' bindchange='bindgoods' range-key='name'>
        <view class='flex-row flex-center flex-1 padding-40   bor_btm'>
          <image class='icon-20' src='{{uploadpath}}resource/{{res.map_icon}}'></image>
          <view class='txt-black h5 flex-1  margin-left-20'>货运类型</view>
          <input class='h5 txt-black text-right' disabled='false' bindinput='goodstype' name='gdstype' placeholder='请选择货运类型' value='{{goodslist[goods_idx].name}}'></input>
          <image class='icon-20' src='{{uploadpath}}resource/{{res.right_icon}}'></image>
        </view>
      </picker>

      <view class='flex-row flex-center flex-1 padding-40   bor_btm'>
        <image class='icon-20' src='{{uploadpath}}resource/{{res.cargotype}}'></image>
        <view class='txt-black h5   margin-left-20'>运输费用</view>
        <input placeholder='请输入每吨价格' bindinput='cost' name='tstcost' class='h5 text-right txt-black flex-1' type='number'></input>
      </view>

      <navigator url='/pages/addmembers/addmembers' wx:if='{{memberlist.length==0}}'>
        <view class='flex-row flex-center flex-1 padding-40   bor_btm'>
          <image class='icon-20' src='{{uploadpath}}resource/{{res.map_icon}}'></image>
          <view class='txt-black h5 flex-1  margin-left-20'>报名联系人</view>
          <input class='h5 txt-black text-right' disabled='false' bindinput='startcontact' name='stcontact' placeholder='请选择起点联系人' value='{{memberlist[startcontact_idx].name}}'></input>
          <image class='icon-20' src='{{uploadpath}}resource/{{res.right_icon}}'></image>
        </view>
    </navigator>

<view wx:if='{{memberlist.length>0}}'>
      <picker range='{{memberlist}}' bindchange='bindenroll' range-key='name'>
        <view class='flex-row flex-center flex-1 padding-40   bor_btm'>
          <image class='icon-20' src='{{uploadpath}}resource/{{res.enterprise}}'></image>
          <view class='txt-black h5 flex-1  margin-left-20'>报名联系人</view>
          <input class='h5 txt-black text-right' disabled='false' bindinput='enrollcontact' name='elcontact' placeholder='请选择报名联系人' value='{{memberlist[enroll_idx].name}}'></input>
          <image class='icon-20' src='{{uploadpath}}resource/{{res.right_icon}}'></image>
        </view>
      </picker>
</view>

   <navigator url='/pages/addmembers/addmembers' wx:if='{{memberlist.length==0}}'>
        <view class='flex-row flex-center flex-1 padding-40   bor_btm'>
          <image class='icon-20' src='{{uploadpath}}resource/{{res.map_icon}}'></image>
          <view class='txt-black h5 flex-1  margin-left-20'>起点联系人</view>
          <input class='h5 txt-black text-right' disabled='false' bindinput='startcontact' name='stcontact' placeholder='请选择起点联系人' value='{{memberlist[startcontact_idx].name}}'></input>
          <image class='icon-20' src='{{uploadpath}}resource/{{res.right_icon}}'></image>
        </view>
    </navigator>

    <view wx:if='{{memberlist.length>0}}'>
      <picker range='{{memberlist}}' bindchange='bindstartcontact' range-key='name'>
        <view class='flex-row flex-center flex-1 padding-40   bor_btm'>
          <image class='icon-20' src='{{uploadpath}}resource/{{res.map_icon}}'></image>
          <view class='txt-black h5 flex-1  margin-left-20'>起点联系人</view>
          <input class='h5 txt-black text-right' disabled='false' bindinput='startcontact' name='stcontact' placeholder='请选择起点联系人' value='{{memberlist[startcontact_idx].name}}'></input>
          <image class='icon-20' src='{{uploadpath}}resource/{{res.right_icon}}'></image>
        </view>
      </picker>
    </view>

<navigator url='/pages/addmembers/addmembers' wx:if='{{memberlist.length==0}}'>
        <view class='flex-row flex-center flex-1 padding-40   bor_btm'>
          <image class='icon-20' src='{{uploadpath}}resource/{{res.map_icon}}'></image>
          <view class='txt-black h5 flex-1  margin-left-20'>终点联系人</view>
          <input class='h5 txt-black text-right' disabled='false' bindinput='startcontact' name='stcontact' placeholder='请选择起点联系人' value='{{memberlist[startcontact_idx].name}}'></input>
          <image class='icon-20' src='{{uploadpath}}resource/{{res.right_icon}}'></image>
        </view>
    </navigator>

<view wx:if='{{memberlist.length>0}}'>
      <picker range='{{memberlist}}' bindchange='bindendcontact' range-key='name'>
        <view class='flex-row flex-center flex-1 padding-40   bor_btm'>
          <image class='icon-20' src='{{uploadpath}}resource/{{res.map_icon}}'></image>
          <view class='txt-black h5 flex-1  margin-left-20'>终点联系人</view>
          <input class='h5 txt-black text-right' disabled='false' bindinput='endcontact' name='edcontact' placeholder='请选择终点联系人' value='{{memberlist[endcontact_idx].name}}'></input>
          <image class='icon-20' src='{{uploadpath}}resource/{{res.right_icon}}'></image>
        </view>
      </picker>
      </view>

      <view class='flex-row   flex-1 padding-40   bor_btm'>
        <image class='icon-20' src='{{uploadpath}}resource/{{res.remarks_icon}}'></image>
        <view class='txt-black h5     margin-left-20'>备注</view>
        <textarea placeholder='暂无备注（限制字数140字）' bindinput='bindremark' name='remark' style='height:100rpx;width:450rpx; border-radius:10rpx;' class='h5 bg-gray padding-20 txt-black   margin-left-10'></textarea>
      </view>

      <view class='padding-40'>
        <checkbox-group bindchange="checkchange">
          <label class='flex-row flex-center checkbox'>
            <view class='flex-1'></view>
            <checkbox value="E" color='#353A4D' checked="" />
            <view class='h5 margin-left-10'>添加为常用任务</view>
          </label>
        </checkbox-group>
      </view>
    </view>

    <button class='cancel_btn bg-bck_ble txt-white text-center' form-type='submit' style='border-radius:0'>发布</button>

  </form>
</view>
<!-- bindtap='bindrelease' -->